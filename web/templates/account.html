{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/login.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/account.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/users.css') }}">
    <title> Профиль </title>
{% endblock head %}

{% block menu %}
    <li><a class='main_a' href="/"> Главная </a></li>
    <li><a class='main_a' href='/make'> Создать опрос </a></li>
    {% if session['logged_in'] %}
    <li><a class='main_a now' href='/account'> {{ session['username'] }} </a></li>
    <li><a class='main_a' href='/logout'> Выйти </a></li>
    {% else %}
    <li><a class='main_a' href='/login'> Войти </a></li>
    <li><a class='main_a now' href='/registration'> Зарегистрироваться </a></li>
    {% endif %}
    <li><a class='main_a' href='/info'> О проекте </a></li>
    <li><a class='main_a' href='/feedback'> Отзыв </a></li>
{% endblock menu %}

{% block content %}
    {% if session['logged_in'] %}
    <h2> {{ name }} </h2>
    <div class='main'>
        <div class='line'>
            <a class='change' href='/changepass'><h4> Поменять пароль </h4></a>
            <a href="/changepass"><img id='one' class='icon' src='{{ url_for("static", filename="img/settings.svg")}}' alt='Иконка' /></a>
        </div>

        <div class='line'>
            <a class='change' href='/changemail'><h4> Поменять email </h4></a>
            <a href='/changemail'><img id='two' class='icon' src='{{ url_for("static", filename="img/email.svg")}}' alt='Иконка' /></a>
        </div>

        {% if role == 'admin' or role == 'moderator' %}
        <div class='line'>
            <a class='change' href='/admintable'><h4> Администрирование <br> пользователей </h4></a>
            <a href="/admintable"><img id='three' class='icon' src='{{ url_for("static", filename="img/folder.svg")}}' alt='Иконка' ></a>
        </div>
        {% endif %}

        {% if role == 'admin' %}
        <div class='line'>
            <a class='change' href="/admin"><h4>Назначение прав <br> модераторов </h4></a>
            <a href="/admin"><img id='four' class='icon' src='{{ url_for("static", filename="img/user.svg")}}' alt='Иконка' ></a>
        </div>

        <div class='line'>
            <a class='change' href='/king'><h4>Назначение прав <br> администратора </h4></a>
            <a href="/king"><img id='five' class='icon' src='{{ url_for("static", filename="img/crown.svg")}}' alt='Иконка' ></a>
        </div>
        {% endif %}

        {% if all_votings %}
            <h2> Список созданных опросов </h2>
            <table>
                <tr class='non-hover'>
                    <th> № </th>
                    <th> Название </th>
                    <th> Описание </th>
                    <th> Ссылка </th>
                </tr>
                {% for voting in all_votings %}
                    <tr>
                        <td class='left'>{{ voting.id }}</td>
                        <td>{{ voting.title }}</td>
                        <td> {{ voting.content }} </td>
                        <td class ='right'><a class='dop_a' href="{{ url_for('vote', vote_id=voting.id) }}"> Голосовать! </a></td>
                    </tr>
                {% endfor %}
            </table>
        {% endif %}
    </div>

    {% else %}
    <p> Эта страница доступна только авторизованным пользователям. <a href="/login">Присоединяйся к нам!</a></p>
    <a href='/login'><img class='earth' src="{{url_for('static', filename='img/planet-earth.svg')}}" alt='img' /></a>
    {% endif %}

    {% if role == 'user' %}
    <script src='{{ url_for("static", filename="js/js-bright-user.js")}}'></script>
    {% endif %}
    {% if role == 'moderator' %}
    <script src='{{ url_for("static", filename="js/js-bright-moderator.js")}}'></script>
    {% endif %}
    {% if role == 'admin' %}
    <script src='{{ url_for("static", filename="js/js-bright-admin.js")}}'></script>
    {% endif %}
{% endblock content %}
